<!DOCTYPE html>
<html lang="en" dir="ltr" typeof="bibo:Document " prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#">
<head><meta lang="" property="dc:language" content="en">
    <title>Micropub</title>
    <meta charset="utf-8">
    
    
    <style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
div.issue-title, div.note-title , div.ednote-title, div.warning-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
}
div.issue-title { color: #e05252; }
div.note-title, div.ednote-title { color: #2b2; }
div.warning-title { color: #f22; }
div.issue-title span, div.note-title span, div.ednote-title span, div.warning-title span {
    text-transform: uppercase;
}
div.note, div.issue, div.ednote, div.warning {
    margin-top: 1em;
    margin-bottom: 1em;
}
.note > p:first-child, .ednote > p:first-child, .issue > p:first-child, .warning > p:first-child { margin-top: 0 }
.issue, .note, .ednote, .warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
div.issue, div.note , div.ednote,  div.warning {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
span.note, span.ednote, span.issue, span.warning { padding: .1em .5em .15em; }

.issue {
    border-color: #e05252;
    background: #fbe9e9;
}
.note, .ednote {
    border-color: #52e052;
    background: #e9fbe9;
}

.warning {
    border-color: #f11;
    border-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}

li.task-list-item {
    list-style: none;
}

input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
}
</style><link rel="pingback" href="https://webmention.io/w3c/xmlrpc">
    <link rel="webmention" href="https://webmention.io/w3c/webmention">
  <style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* Override code highlighter background */
.hljs {
    background: transparent !important;
}

/* --- INLINES --- */
em.rfc2119 {
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #C83500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

.respec-hidden {
    display: none;
}

@media print {
    .removeOnSave {
        display: none;
    }
}
</style><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED"><!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--><script id="initialUserConfig" type="application/json">{
  "useExperimentalStyles": true,
  "publishDate": "2016-05-19",
  "specStatus": "ED",
  "previousMaturity": "WD",
  "previousPublishDate": "2016-03-01",
  "shortName": "micropub",
  "edDraftURI": "http://micropub.net/draft/",
  "editors": [
    {
      "name": "Aaron Parecki",
      "url": "http://aaronparecki.com/",
      "w3cid": "59996"
    }
  ],
  "wg": "Social Web Working Group",
  "wgURI": "http://www.w3.org/Social/WG",
  "wgPublicList": "public-socialweb",
  "wgPatentURI": "http://www.w3.org/2004/01/pp-impl/72531/status",
  "license": "w3c-software-doc",
  "otherLinks": [
    {
      "key": "Repository",
      "data": [
        {
          "value": "Github",
          "href": "https://github.com/aaronpk/micropub"
        },
        {
          "value": "Issues",
          "href": "https://github.com/aaronpk/micropub/issues"
        },
        {
          "value": "Commits",
          "href": "https://github.com/aaronpk/micropub/commits/master"
        }
      ]
    }
  ],
  "localBiblio": {
    "Microformats2": {
      "title": "Microformats 2",
      "href": "http://microformats.org/wiki/microformats2",
      "authors": [
        "Tantek Çelik"
      ],
      "status": "Living Specification",
      "publisher": "microformats.org"
    },
    "microformats2-parsing": {
      "title": "Microformats2 Parsing",
      "href": "http://microformats.org/wiki/microformats2-parsing",
      "authors": [
        "Tantek Çelik"
      ],
      "status": "Living Specification",
      "publisher": "microformats.org"
    },
    "h-entry": {
      "title": "h-entry",
      "href": "http://microformats.org/wiki/h-entry",
      "authors": [
        "Tantek Çelik"
      ],
      "status": "Living Specification",
      "publisher": "microformats.org"
    },
    "h-card": {
      "title": "h-card",
      "href": "http://microformats.org/wiki/h-card",
      "authors": [
        "Tantek Çelik"
      ],
      "status": "Living Specification",
      "publisher": "microformats.org"
    },
    "h-event": {
      "title": "h-event",
      "href": "http://microformats.org/wiki/h-event",
      "authors": [
        "Tantek Çelik"
      ],
      "status": "Living Specification",
      "publisher": "microformats.org"
    },
    "h-adr": {
      "title": "h-adr",
      "href": "http://microformats.org/wiki/h-adr",
      "authors": [
        "Tantek Çelik"
      ],
      "status": "Living Specification",
      "publisher": "microformats.org"
    },
    "IndieAuth": {
      "title": "IndieAuth",
      "href": "http://indiewebcamp.com/IndieAuth-spec",
      "authors": [
        "Aaron Parecki"
      ],
      "status": "Living Specification",
      "publisher": "indiewebcamp.com"
    },
    "URL": {
      "title": "URL",
      "href": "https://url.spec.whatwg.org/",
      "authors": [
        "Anne van Kesteren"
      ],
      "status": "Living Specification",
      "publisher": "WHATWG"
    }
  }
}</script></head>
  <body class="h-entry" role="document" id="respecDocument"><div class="head" role="contentinfo" id="respecHeader">
  <p>
            <a class="logo" href="http://www.w3.org/"><img width="72" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C"></a>
  </p>
  <h1 class="title p-name" id="title" property="dcterms:title">Micropub</h1>
  <h2 id="w3c-editor-s-draft-19-may-2016"><abbr title="World Wide Web Consortium">W3C</abbr> Editor's Draft <time property="dcterms:issued" class="dt-published" datetime="2016-05-19">19 May 2016</time></h2>
  <dl>
      <dt>This version:</dt>
      <dd><a class="u-url" href="http://micropub.net/draft/">http://micropub.net/draft/</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="http://www.w3.org/TR/micropub/">http://www.w3.org/TR/micropub/</a></dd>
      <dt>Latest editor's draft:</dt>
      <dd><a href="http://micropub.net/draft/">http://micropub.net/draft/</a></dd>
    <dt>Editor:</dt>
    <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0" data-editor-id="59996"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="Aaron Parecki"><a class="u-url url p-name fn" property="foaf:homepage" href="http://aaronparecki.com/">Aaron Parecki</a></span>
<span property="rdf:rest" resource="rdf:nil"></span>
</dd>

          <dt>Repository:</dt>
                  <dd>
                    <a href="https://github.com/aaronpk/micropub">
                      Github
                    </a>
                  </dd>
                  <dd>
                    <a href="https://github.com/aaronpk/micropub/issues">
                      Issues
                    </a>
                  </dd>
                  <dd>
                    <a href="https://github.com/aaronpk/micropub/commits/master">
                      Commits
                    </a>
                  </dd>
  </dl>
      <p class="copyright">
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
        2016
        
        <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
        (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). 
        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
            <a rel="license" href="http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a>
        rules apply.
      </p>
  <hr title="Separator for header">
</div>
    <section id="abstract" class="introductory" property="dc:abstract"><h2 id="h-abstract" resource="#h-abstract"><span property="xhv:role" resource="xhv:heading">Abstract</span></h2>
      <p class="p-summary">
        Micropub is an open API standard used to create posts on one's own domain using third-party clients. Web apps and native apps (e.g., iPhone, Android) can use Micropub to post short notes, photos, events or other posts to your own site.
      </p>

      <section id="authorsnote" class="informative" typeof="bibo:Chapter" resource="#authorsnote" property="bibo:hasPart">
        <h3 id="h-authorsnote" resource="#h-authorsnote"><span property="xhv:role" resource="xhv:heading">Author's Note</span></h3><p><em>This section is non-normative.</em></p>
        <p>This specification was contributed to the <abbr title="World Wide Web Consortium">W3C</abbr> from the
          <a href="http://indiewebcamp.com/">IndieWebCamp</a> community. More
          history and evolution of Micropub can be found on the
          <a href="http://indiewebcamp.com/micropub">IndieWebCamp wiki</a>.</p>
      </section>
    </section><section id="sotd" class="introductory"><h2 id="h-sotd" resource="#h-sotd"><span property="xhv:role" resource="xhv:heading">Status of This Document</span></h2>
        <p>
          <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at http://www.w3.org/TR/.</em>
        </p>
          
    
          <p>
            This document was published by the <a href="http://www.w3.org/Social/WG">Social Web Working Group</a> as an Editor's Draft.
              If you wish to make comments regarding this document, please send them to
              <a href="mailto:public-socialweb@w3.org">public-socialweb@w3.org</a>
              (<a href="mailto:public-socialweb-request@w3.org?subject=subscribe">subscribe</a>,
              <a href="http://lists.w3.org/Archives/Public/public-socialweb/">archives</a>).
            
              All comments are welcome.
          </p>
            <p>
              Publication as an Editor's Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr>
              Membership. This is a draft document and may be updated, replaced or obsoleted by other
              documents at any time. It is inappropriate to cite this document as other than work in
              progress.
            </p>
          <p>
              This document was produced by
              a group
               operating under the
              <a id="sotd_patent" property="w3p:patentRules" href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
              Policy</a>.
                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="http://www.w3.org/2004/01/pp-impl/72531/status" rel="disclosure">public list of any patent
                disclosures</a>
              made in connection with the deliverables of
              the group; that page also includes
              instructions for disclosing a patent. An individual who has actual knowledge of a patent
              which the individual believes contains
              <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
              Claim(s)</a> must disclose the information in accordance with
              <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
              6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
          </p>
            <p>This document is governed by the <a id="w3c_process_revision" href="http://www.w3.org/2015/Process-20150901/">1 September 2015 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
            </p>
          
</section><nav id="toc"><h2 class="introductory" id="table-of-contents" resource="#table-of-contents"><span property="xhv:role" resource="xhv:heading">Table of Contents</span></h2><ul class="toc" role="directory"><li class="tocline"><a href="#introduction" class="tocxref"><span class="secno">1. </span>Introduction</a><ul class="toc"><li class="tocline"><a href="#background" class="tocxref"><span class="secno">1.1 </span>Background</a></li></ul></li><li class="tocline"><a href="#conformance" class="tocxref"><span class="secno">2. </span>Conformance</a><ul class="toc"><li class="tocline"><a href="#conformance-classes" class="tocxref"><span class="secno">2.1 </span>Conformance Classes</a></li></ul></li><li class="tocline"><a href="#syntax" class="tocxref"><span class="secno">3. </span>Syntax</a><ul class="toc"><li class="tocline"><a href="#overview" class="tocxref"><span class="secno">3.1 </span>Overview</a></li><li class="tocline"><a href="#reserved-properties" class="tocxref"><span class="secno">3.2 </span>Reserved Properties</a></li><li class="tocline"><a href="#create" class="tocxref"><span class="secno">3.3 </span>Create</a><ul class="toc"><li class="tocline"><a href="#uploading-files" class="tocxref"><span class="secno">3.3.1 </span>Uploading Files</a></li><li class="tocline"><a href="#json-syntax" class="tocxref"><span class="secno">3.3.2 </span>JSON Syntax</a></li><li class="tocline"><a href="#nested-microformats-objects" class="tocxref"><span class="secno">3.3.3 </span>Nested Microformats Objects</a></li><li class="tocline"><a href="#unrecognized-properties" class="tocxref"><span class="secno">3.3.4 </span>Unrecognized Properties</a></li><li class="tocline"><a href="#response" class="tocxref"><span class="secno">3.3.5 </span>Response</a></li></ul></li><li class="tocline"><a href="#update" class="tocxref"><span class="secno">3.4 </span>Update</a><ul class="toc"><li class="tocline"><a href="#replace" class="tocxref"><span class="secno">3.4.1 </span>Replace</a></li><li class="tocline"><a href="#add" class="tocxref"><span class="secno">3.4.2 </span>Add</a></li><li class="tocline"><a href="#remove" class="tocxref"><span class="secno">3.4.3 </span>Remove</a></li><li class="tocline"><a href="#response-1" class="tocxref"><span class="secno">3.4.4 </span>Response</a></li></ul></li><li class="tocline"><a href="#delete" class="tocxref"><span class="secno">3.5 </span>Delete</a></li><li class="tocline"><a href="#media-endpoint" class="tocxref"><span class="secno">3.6 </span>Media Endpoint</a><ul class="toc"><li class="tocline"><a href="#request" class="tocxref"><span class="secno">3.6.1 </span>Request</a></li><li class="tocline"><a href="#response-2" class="tocxref"><span class="secno">3.6.2 </span>Response</a></li></ul></li><li class="tocline"><a href="#querying" class="tocxref"><span class="secno">3.7 </span>Querying</a><ul class="toc"><li class="tocline"><a href="#configuration" class="tocxref"><span class="secno">3.7.1 </span>Configuration</a></li><li class="tocline"><a href="#source-content" class="tocxref"><span class="secno">3.7.2 </span>Source Content</a></li><li class="tocline"><a href="#syndication-targets" class="tocxref"><span class="secno">3.7.3 </span>Syndication Targets</a></li></ul></li><li class="tocline"><a href="#error-response" class="tocxref"><span class="secno">3.8 </span>Error Response</a></li></ul></li><li class="tocline"><a href="#vocabulary" class="tocxref"><span class="secno">4. </span>Vocabulary</a><ul class="toc"><li class="tocline"><a href="#examples-of-creating-objects" class="tocxref"><span class="secno">4.1 </span>Examples of Creating Objects</a><ul class="toc"><li class="tocline"><a href="#new-note" class="tocxref"><span class="secno">4.1.1 </span>New Note</a></li><li class="tocline"><a href="#new-reply" class="tocxref"><span class="secno">4.1.2 </span>New Reply</a></li><li class="tocline"><a href="#new-repost" class="tocxref"><span class="secno">4.1.3 </span>New Repost</a></li><li class="tocline"><a href="#new-article" class="tocxref"><span class="secno">4.1.4 </span>New Article</a></li><li class="tocline"><a href="#adding-files" class="tocxref"><span class="secno">4.1.5 </span>Adding Files</a></li></ul></li></ul></li><li class="tocline"><a href="#authentication-and-authorization" class="tocxref"><span class="secno">5. </span>Authentication and Authorization</a><ul class="toc"><li class="tocline"><a href="#authentication" class="tocxref"><span class="secno">5.1 </span>Authentication</a></li><li class="tocline"><a href="#authorization" class="tocxref"><span class="secno">5.2 </span>Authorization</a></li><li class="tocline"><a href="#endpoint-discovery" class="tocxref"><span class="secno">5.3 </span>Endpoint Discovery</a></li><li class="tocline"><a href="#scope" class="tocxref"><span class="secno">5.4 </span>Scope</a></li></ul></li><li class="tocline"><a href="#resources" class="tocxref"><span class="secno">A. </span>Resources</a></li><li class="tocline"><a href="#implementations" class="tocxref"><span class="secno">B. </span>Implementations</a><ul class="toc"><li class="tocline"><a href="#libraries" class="tocxref"><span class="secno">B.1 </span>Libraries</a></li><li class="tocline"><a href="#servers" class="tocxref"><span class="secno">B.2 </span>Servers</a></li><li class="tocline"><a href="#clients" class="tocxref"><span class="secno">B.3 </span>Clients</a></li><li class="tocline"><a href="#services" class="tocxref"><span class="secno">B.4 </span>Services</a></li></ul></li><li class="tocline"><a href="#acknowledgements" class="tocxref"><span class="secno">C. </span>Acknowledgements</a></li><li class="tocline"><a href="#change-log" class="tocxref"><span class="secno">D. </span>Change Log</a><ul class="toc"><li class="tocline"><a href="#changes-from-04-may-2016-wd-to-this-version" class="tocxref"><span class="secno">D.1 </span>Changes from 04 May 2016 WD to this version</a></li><li class="tocline"><a href="#changes-from-01-march-2016-wd-to-04-may-2016-version" class="tocxref"><span class="secno">D.2 </span>Changes from 01 March 2016 WD to 04 May 2016 version</a></li><li class="tocline"><a href="#changes-from-28-january-2016-fpwd-to-01-march-2016-version" class="tocxref"><span class="secno">D.3 </span>Changes from 28 January 2016 FPWD to 01 March 2016 version</a></li></ul></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">E. </span>References</a><ul class="toc"><li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">E.1 </span>Normative references</a></li><li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">E.2 </span>Informative references</a></li></ul></li></ul></nav>

    

    <section id="introduction" typeof="bibo:Chapter" resource="#introduction" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-introduction" resource="#h-introduction"><span property="xhv:role" resource="xhv:heading"><span class="secno">1. </span>Introduction</span></h2>

      <p>Micropub is a spec to create content on a server using web or native app clients.</p>

      <section class="informative" id="background" typeof="bibo:Chapter" resource="#background" property="bibo:hasPart">
        <h3 id="h-background" resource="#h-background"><span property="xhv:role" resource="xhv:heading"><span class="secno">1.1 </span>Background</span></h3><p><em>This section is non-normative.</em></p>

        <p>The Micropub vocabulary is derived directly from the [<cite><a class="bibref" href="#bib-Microformats2">Microformats2</a></cite>]
          vocabulary. Micropub is meant to be a serialization of Microformats
          that can be submitted as an HTTP POST. The method for developing new
          Micropub vocabularies is to look at the Microformats representation
          and work backwards.</p>
      </section>

    </section>

    <section id="conformance" typeof="bibo:Chapter" resource="#conformance" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-conformance" resource="#h-conformance"><span property="xhv:role" resource="xhv:heading"><span class="secno">2. </span>Conformance</span></h2>

      <p>The key words "<em class="rfc2119" title="MUST">MUST</em>", "<em class="rfc2119" title="MUST NOT">MUST NOT</em>", "<em class="rfc2119" title="REQUIRED">REQUIRED</em>", "<em class="rfc2119" title="SHALL">SHALL</em>", "<em class="rfc2119" title="SHALL NOT">SHALL NOT</em>",
      "<em class="rfc2119" title="SHOULD">SHOULD</em>", "<em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em>", "<em class="rfc2119" title="RECOMMENDED">RECOMMENDED</em>", "<em class="rfc2119" title="MAY">MAY</em>", and "<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>" in this
      document are to be interpreted as described in [<cite><a class="bibref" href="#bib-RFC2119">RFC2119</a></cite>].</p>

      <section id="conformance-classes" typeof="bibo:Chapter" resource="#conformance-classes" property="bibo:hasPart">
        <h3 id="h-conformance-classes" resource="#h-conformance-classes"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.1 </span>Conformance Classes</span></h3>

        <p>This section describes the conformance criteria for Micropub clients and servers.</p>

        <h3 id="publishing-clients">Publishing Clients</h3>

        <p>A conforming Micropub client that creates posts:</p>
        <ul>
          <li><em class="rfc2119" title="MUST">MUST</em> support sending x-www-form-urlencoded requests</li>
          <li>must support the [<cite><a class="bibref" href="#bib-h-entry">h-entry</a></cite>] vocabulary</li>
          <li><em class="rfc2119" title="SHOULD">SHOULD</em> handle server error messages gracefully, presenting helpful messages to the user</li>
          <li><em class="rfc2119" title="SHOULD">SHOULD</em> support <a href="#endpoint-discovery">endpoint discovery</a> given an [<cite><a class="bibref" href="#bib-IndieAuth">IndieAuth</a></cite>] identity URL</li>
        </ul>

        <h3 id="editing-clients">Editing Clients</h3>

        <p>A conforming Micropub client that edits posts:</p>
        <ul>
          <li><em class="rfc2119" title="MUST">MUST</em> support sending x-www-form-urlencoded requests</li>
          <li><em class="rfc2119" title="MUST">MUST</em> support the [<cite><a class="bibref" href="#bib-h-entry">h-entry</a></cite>] vocabulary</li>
        </ul>

        <h4 id="servers-1">Servers</h4>

        <p>A conforming Micropub server:</p>
        <ul>
          <li><em class="rfc2119" title="MUST">MUST</em> support both header and form parameter methods of <a href="#authentication">authentication</a></li>
          <li><em class="rfc2119" title="MUST">MUST</em> support x-www-form-urlencoded requests for <a href="#create">creating</a> posts</li>
          <li><em class="rfc2119" title="MUST">MUST</em> support <a href="#create">creating</a> posts with the [<cite><a class="bibref" href="#bib-h-entry">h-entry</a></cite>] vocabulary</li>
          <li><em class="rfc2119" title="SHOULD">SHOULD</em> support <a href="#update">updating</a> and <a href="#delete">deleting</a> posts</li>
        </ul>

      </section>

    </section> <!-- Conformance -->      

    <section id="syntax" typeof="bibo:Chapter" resource="#syntax" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-syntax" resource="#h-syntax"><span property="xhv:role" resource="xhv:heading"><span class="secno">3. </span>Syntax</span></h2>

      <p>As [<cite><a class="bibref" href="#bib-Microformats2">Microformats2</a></cite>] has a relatively small ruleset for parsing
        HTML documents into a data structure, Micropub similarly defines a small set of
        rules to interpret HTTP POST and GET requests as Micropub commands.
        Where Microformats do not require changing the parsing rules to
        introduce new properties of an object such as an [<cite><a class="bibref" href="#bib-h-entry">h-entry</a></cite>], Micropub
        similarly does not require changing parsing rules to interpret requests
        that may correspond to different post types, such as posting videos vs
        "likes".</p>
      <p>The Micropub syntax describes how to interpret HTTP POST and GET
        requests into useful server actions.</p>

      <section id="overview" typeof="bibo:Chapter" resource="#overview" property="bibo:hasPart">
        <h3 id="h-overview" resource="#h-overview"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.1 </span>Overview</span></h3>

        <p>All Micropub requests to create posts are sent as
          <a href="https://www.w3.org/TR/html5/forms.html#url-encoded-form-data">x-www-form-urlencoded</a>,
          <a href="https://www.w3.org/TR/html5/forms.html#multipart-form-data">multipart form-data</a> [<cite><a class="bibref" href="#bib-HTML5">HTML5</a></cite>],
          or [<cite><a class="bibref" href="#bib-JSON">JSON</a></cite>]-encoded HTTP requests. Responses typically do not include
          a response body, indicating the needed information (such as the URL
          of the created post) in HTTP headers. When a response body is necessary,
          it <em class="rfc2119" title="SHOULD">SHOULD</em> be returned as a [<cite><a class="bibref" href="#bib-JSON">JSON</a></cite>] encoded object.</p>
      </section>

      <section id="reserved-properties" typeof="bibo:Chapter" resource="#reserved-properties" property="bibo:hasPart">
        <h3 id="h-reserved-properties" resource="#h-reserved-properties"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.2 </span>Reserved Properties</span></h3>

        <p>A few POST body property names are reserved when requests are sent as x-www-form-urlencoded or multipart form data.</p>

        <p>
          </p><ul>
            <li><code>access_token</code> - the OAuth Bearer token authenticating the request (the access token may be sent in an HTTP Authorization header or this form parameter)</li>
            <li><code>h</code> - used to specify the object type being created</li>
            <li><code>q</code> - used to query a Micropub endpoint</li>
            <li><code>url</code> - indicates the URL of the object being changed</li>
            <li><code>mp-action</code> - indicates whether this is an <code>update</code>, <code>delete</code>, or <code>undelete</code></li>
            <li><code>replace</code> - for updates, the top-level property containing properties to replace</li>
            <li><code>add</code> - for updates, the top-level property containing properties to add</li>
            <li><code>delete</code> - for updates, the top-level property containing properties to remove</li>
            <li><code>mp-*</code> - reserved for future use</li>
          </ul>
        <p></p>

        <p>When creating posts, all other properties in the request are considered properties of the object being created.</p>
        <p>Note: The server <em class="rfc2119" title="MUST NOT">MUST NOT</em> store the <code>access_token</code> property in the post.</p>
      </section>

      <section id="create" typeof="bibo:Chapter" resource="#create" property="bibo:hasPart">
        <h3 id="h-create" resource="#h-create"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.3 </span>Create</span></h3>

        <p>To create a post, send an HTTP POST request to the Micropub endpoint indicating the type of post you are creating, as well as specifying the properties of the post. If no type is specified, the default type [<cite><a class="bibref" href="#bib-h-entry">h-entry</a></cite>] <em class="rfc2119" title="SHOULD">SHOULD</em> be used. Clients and servers <em class="rfc2119" title="MUST">MUST</em> support creating posts using the x-www-form-urlencoded encoding, and <em class="rfc2119" title="MAY">MAY</em> also support creating posts using the <a href="#json-syntax">JSON syntax</a>.</p>

        <p></p><pre><code>h={Microformats object type}</code></pre><p></p>
        <p>e.g., <code>h=entry</code></p>
        <p>All parameters not beginning with "mp-" are properties of the object being created.</p>
        <p>e.g., <code>content=hello+world</code></p>
        <p>To specify multiple values for a property, such as multiple categories of an h-entry, use array bracket notation for the property name.</p>
        <p>e.g., <code>category[]=foo&amp;category[]=bar</code></p>
        <p>Properties that accept multiple values <em class="rfc2119" title="MUST">MUST</em> also accept a single value as a string. A complete example of a form-encoded request follows.</p>
        <p></p><div class="example"><div class="example-title marker"><span>Example 1</span></div><pre class="">h=entry&amp;content=hello+world&amp;category[]=foo&amp;category[]=bar</pre></div><p></p>

        <section id="uploading-files" typeof="bibo:Chapter" resource="#uploading-files" property="bibo:hasPart">
          <h4 id="h-uploading-files" resource="#h-uploading-files"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.3.1 </span>Uploading Files</span></h4>

          <p>To upload files, format the whole request as multipart/form-data and send the file(s) as a standard property.</p>
          <p>For example, to upload a photo with a caption, send a request that contains three parts, named <code>h</code>, <code>content</code> and <code>photo</code>.</p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 2</span></div><pre class="">multipart/form-data; boundary=553d9cee2030456a81931fb708ece92c

--553d9cee2030456a81931fb708ece92c
Content-Disposition: form-data; name="h"

entry
--553d9cee2030456a81931fb708ece92c
Content-Disposition: form-data; name="content"

Hello World!
--553d9cee2030456a81931fb708ece92c
Content-Disposition: form-data; name="photo"; filename="aaronpk.png"
Content-Type: image/png
Content-Transfer-Encoding: binary

... (binary data) ...
--553d9cee2030456a81931fb708ece92c--</pre></div><p></p>

          <p>For properties that can accept a file upload (such as <code>photo</code> or <code>video</code>), the Micropub endpoint <em class="rfc2119" title="MUST">MUST</em> also accept a URL value, treating that the same as if the file had been uploaded directly. The endpoint <em class="rfc2119" title="MAY">MAY</em> download a copy of the file at the URL and store it the same way it would store the file if it had been uploaded directly. For example:</p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 3</span></div><pre class="">h=entry&amp;content=hello+world&amp;photo=https://photos.example.com/592829482876343254.jpg</pre></div><p></p>

          <p>See the <a href="#media-endpoint">Media Endpoint</a> section for more information.</p>
        </section>

        <section id="json-syntax" typeof="bibo:Chapter" resource="#json-syntax" property="bibo:hasPart">
          <h4 id="h-json-syntax" resource="#h-json-syntax"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.3.2 </span>JSON Syntax</span></h4>

          <p>Alternately, you can create a post with JSON syntax by sending the entry in the parsed Microformats 2 JSON format. However, in this case, you cannot also upload a file, you can only reference files by URL as described above.</p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 4</span></div><pre class="">{
  "type": ["h-entry"],
  "properties": {
    "content": ["hello world"],
    "category": ["foo","bar"],
    "photo": "https://photos.example.com/592829482876343254.jpg"
  }
}</pre></div><p></p>
        </section>

        <section id="nested-microformats-objects" typeof="bibo:Chapter" resource="#nested-microformats-objects" property="bibo:hasPart">
          <h4 id="h-nested-microformats-objects" resource="#h-nested-microformats-objects"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.3.3 </span>Nested Microformats Objects</span></h4>

          <p>Whenever possible, nested Microformats objects should be avoided. A
            better alternative is to reference objects by their URLs. The most common
            example is including an h-card for a venue, such as checking in to a location
            or tagging a photo with a person or location. In these cases, it is
            better to reference the object by URL, creating it first if necessary.</p>

          <p>This technique has the advantage of ensuring that each object that is
            created has its own URL (each piece of data has its own link). This also
            gives the server an opportunity to handle each entity separately.
            E.g., rather than creating a duplicate of an existing venue, it may
            give back a link to one that was already created, possibly even
            merging newly received data first.</p>

          <p>In some cases, it does not make sense for the nested object to have
            a URL. For example, when posting an h-measure value, there is no
            reason for the h-measure itself to have a URL, so this is an acceptable
            case to use the nested Microformats object syntax.</p>

          <p>The example below creates a new "weight" measurement post as an
            h-entry with a h-measure objects to describe the weight and bodyfat values.</p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 5</span></div><pre class="">h=entry
&amp;summary=Weighed+155.73+pounds
&amp;weight[type]=h-measure
&amp;weight[properties][num]=155.73
&amp;weight[properties][unit]=lb
&amp;bodyfat[type]=h-measure
&amp;bodyfat[properties][num]=19.83
&amp;bodyfat[properties][unit]=%</pre></div><p></p>

<p></p><div class="example"><div class="example-title marker"><span>Example 6</span></div><pre class="">{
  "type": ["h-entry"],
  "properties": {
    "summary": [
      "Weight 155.73 pounds"
    ],
    "weight": [
      {
        "type": "h-measure",
        "properties": {
          "num": ["155.73"],
          "unit": ["lb"]
        }
      }
    ],
    "bodyfat": [
      {
        "type": "h-measure",
        "properties": {
          "num": ["19.83"],
          "unit": ["%"]
        }
      }
    ]
  }
}</pre></div><p></p>

        </section>

        <section id="unrecognized-properties" typeof="bibo:Chapter" resource="#unrecognized-properties" property="bibo:hasPart">
          <h4 id="h-unrecognized-properties" resource="#h-unrecognized-properties"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.3.4 </span>Unrecognized Properties</span></h4>

          <p>If the request includes properties that the server does not recognize, it <em class="rfc2119" title="SHOULD">SHOULD</em> 
          create the post anyway with any values that are recognized, and <em class="rfc2119" title="SHOULD">SHOULD</em>
          store the unrecognized values internally, and return them when queried.</p>

          <p>This allows clients to post rich types of content to servers that recognize it, 
          while also posting fallback content to servers that don't.</p>

        </section>

        <section id="response" typeof="bibo:Chapter" resource="#response" property="bibo:hasPart">
          <h4 id="h-response" resource="#h-response"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.3.5 </span>Response</span></h4>

          <p>When the post is created, the Micropub endpoint <em class="rfc2119" title="MUST">MUST</em> return either
            an <code>HTTP 201 Created</code> status code or <code>HTTP 202 Accepted</code>
            code, and <em class="rfc2119" title="MUST">MUST</em> return a <code>Location</code> header indicating the
            URL of the created post. [<cite><a class="bibref" href="#bib-RFC2616">RFC2616</a></cite>]</p>

          <p>If the target also provides a shortlink, or if it syndicated the
            post to another location, the Micropub endpoint <em class="rfc2119" title="MAY">MAY</em> return additional
            URLs using the HTTP Link header, along with an appropriate "rel" value.
            For example, it can return the short URL of a post by responding with:
            </p><pre>Link: &lt;http://aaron.pk/xxxxx&gt;; rel="shortlink"</pre> or
            can include the location of the syndicated post with:
            <pre>Link: &lt;https://https://myfavoritesocialnetwork.example/aaronpk/xxxxxx&gt;; rel="syndication"</pre><p></p>

          <p>If the endpoint chooses to process the request asynchronously rather
            than creating and storing the post immediately, it <em class="rfc2119" title="MUST">MUST</em> return an
            <code>HTTP 202 Accepted</code> status code, and <em class="rfc2119" title="MUST">MUST</em> also return
            the <code>Location</code> header in this case. If the server is
            going to return 202, it <em class="rfc2119" title="MUST">MUST</em> ensure the object will be created
            successfully prior to returning 202, as clients will expect the
            object at the indicated URL to exist at some point in the (near)
            future. In other words, the server must do any error checking
            and validation before returning 202.</p>

          <h4 id="error-response-1">Error Response</h4>

          <p>See the "Error Responses" section below for details on how to indicate an error occurred.</p>

        </section> <!-- Response -->

      </section> <!-- Create -->

      <section id="update" typeof="bibo:Chapter" resource="#update" property="bibo:hasPart">
        <h3 id="h-update" resource="#h-update"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.4 </span>Update</span></h3>

        <p>Micropub servers <em class="rfc2119" title="SHOULD">SHOULD</em> support updating posts, including adding and 
          removing individual properties as described in this section.</p>

        <p>Updating entries can be done with either a JSON post or form-encoded
          post. The syntax of the update request is the same in both cases,
          using the array bracket notation when encoding in form-encoded format.</p>

        <p>To update an entry, send <code>mp-action=update</code> and specify the
          URL of the entry that is being updated using the "url" property.
          The request <em class="rfc2119" title="MUST">MUST</em> also include either a <code>replace</code>,
          <code>add</code> or <code>delete</code> property containing the updates to make.</p>

        <section id="replace" typeof="bibo:Chapter" resource="#replace" property="bibo:hasPart">
          <h4 id="h-replace" resource="#h-replace"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.4.1 </span>Replace</span></h4>

          <p>Replace all values of the property. If the property does not exist already, it is created.</p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 7</span></div><pre class="">mp-action=update
&amp;url=http://example.com/post/1
&amp;replace[content]=hello+moon</pre></div><p></p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 8</span></div><pre class="">{
  "mp-action": "update",
  "url": "http://example.com/post/1",
  "replace": {
    "content": ["hello moon"]
  }
}</pre></div><p></p>
          <p>This will replace the entire entry content with the new text.</p>
        </section>

        <section id="add" typeof="bibo:Chapter" resource="#add" property="bibo:hasPart">
          <h4 id="h-add" resource="#h-add"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.4.2 </span>Add</span></h4>

          <p>If there are any existing values for this property, they are not
            changed, the new values are added. If the property does not
            exist already, it is created.</p>

          <h4 id="adding-a-syndication-url">Adding a syndication URL</h4>
          <p>Use case: adding a syndication link to a post after it has been
            published. For example, when a client supports posting first then
            syndicating to MyFavoriteSocialNetwork or Wikimedia after the fact,
            the site needs a way to update the original post with the new syndication URL.</p>
          <p>To add syndication URLs, include one or more URLs in the update request.</p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 9</span></div><pre class="">mp-action=update
&amp;url=http://aaronpk.example/notes/2014/06/01/2/indieweb
&amp;add[syndication][]=https://archive.org/example</pre></div><p></p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 10</span></div><pre class="">{
  "mp-action": "update",
  "url": "http://aaronparecki.com/notes/2014/06/01/2/indieweb",
  "add": {
    "syndication": ["https://archive.org/"]
  }
}</pre></div><p></p>

          <h4 id="adding-tags">Adding Tags</h4>
          <p>Use case: adding tags to a post after it's been created.</p>
          <p>To add multiple values to a property (such as category), use array notation to specify the multiple values.</p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 11</span></div><pre class="">mp-action=update
&amp;url=http://aaronpk.example/notes/2014/06/01/2/indieweb
&amp;add[category][]=webmention
&amp;add[category][]=indieweb</pre></div><p></p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 12</span></div><pre class="">{
  "mp-action": "update",
  "url": "http://aaronpk.example/notes/2014/06/01/2/indieweb",
  "add": {
    "category": ["webmention","indieweb"]
  }
}</pre></div><p></p>
        </section>

        <section id="remove" typeof="bibo:Chapter" resource="#remove" property="bibo:hasPart">
          <h4 id="h-remove" resource="#h-remove"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.4.3 </span>Remove</span></h4>

          <p>If the property exists, remove it. This completely removes the specified property.</p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 13</span></div><pre class="">mp-action=update
&amp;url=http://example.com/post/1
&amp;delete=category</pre></div><p></p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 14</span></div><pre class="">{
  "mp-action": "update",
  "url": "http://example.com/post/1",
  "delete": ["category"]
}</pre></div><p></p>

          <p>For properties with multiple values, such as categories, you can
            remove individual entries by value. If no values remain, the
            property is removed.</p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 15</span></div><pre class="">mp-action=update
&amp;url=http://example.com/post/1
&amp;delete[category]=indieweb</pre></div><p></p>
          <p></p><div class="example"><div class="example-title marker"><span>Example 16</span></div><pre class="">{
  "mp-action": "update",
  "url": "http://example.com/post/1",
  "delete": {
    "category": ["indieweb"]
  }
}</pre></div><p></p>
        </section>

        <section id="response-1" typeof="bibo:Chapter" resource="#response-1" property="bibo:hasPart">
          <h4 id="h-response-1" resource="#h-response-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.4.4 </span>Response</span></h4>

          <p>The server <em class="rfc2119" title="MUST">MUST</em> respond to successful update requests with HTTP 200, 201 or 204. If the update operation caused the URL of the post to change, the server <em class="rfc2119" title="MUST">MUST</em> respond with HTTP 201 and include the new URL in the HTTP <code>Location</code> header. Otherwise, the server <em class="rfc2119" title="MUST">MUST</em> respond with 200 or 204, depending on whether the response body has content. No body is required in the response, but the response <em class="rfc2119" title="MAY">MAY</em> contain a JSON object describing the changes that were made.</p>

        </section>

      </section> <!-- Updating -->

      <section id="delete" typeof="bibo:Chapter" resource="#delete" property="bibo:hasPart">
        <h3 id="h-delete" resource="#h-delete"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.5 </span>Delete</span></h3>

        <p>Micropub servers <em class="rfc2119" title="SHOULD">SHOULD</em> support deleting posts, and <em class="rfc2119" title="MAY">MAY</em> support undeleting posts.</p>

        <p>To delete an entire entry at a URL, send a POST request containing
          <code>mp-action=delete</code> and the URL of the item in the
          <code>url</code> property.</p>

        <p></p><div class="example"><div class="example-title marker"><span>Example 17</span></div><pre class="">mp-action=delete
&amp;url=http://example.com/post/1</pre></div><p></p>
        <p></p><div class="example"><div class="example-title marker"><span>Example 18</span></div><pre class="">{
  "mp-action": "delete",
  "url": "http://example.com/post/1"
}</pre></div><p></p>

        <p>To undelete a post, use "undelete" as the action.</p>
        <p></p><div class="example"><div class="example-title marker"><span>Example 19</span></div><pre class="">mp-action=undelete
&amp;url=http://example.com/post/1</pre></div><p></p>
        <p></p><div class="example"><div class="example-title marker"><span>Example 20</span></div><pre class="">{
  "mp-action": "undelete",
  "url": "http://example.com/post/1"
}</pre></div><p></p>

      </section> <!-- Delete -->

      <section id="media-endpoint" typeof="bibo:Chapter" resource="#media-endpoint" property="bibo:hasPart">
        <h3 id="h-media-endpoint" resource="#h-media-endpoint"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.6 </span>Media Endpoint</span></h3>

        <p>In order to provide a better user experience for Micropub applications, as well as to overcome the limitation of being unable to upload a file with the JSON syntax, a Micropub server <em class="rfc2119" title="MAY">MAY</em> support a "Media Endpoint". The role of the Media Endpoint is exclusively to handle file uploads and return a URL that can be used in a subsequent Micropub request.</p>

        <p>To advertise that the Micropub endpoint supports a Media Endpoint, the server <em class="rfc2119" title="MUST">MUST</em> include a key called <code>media-endpoint</code> with a value of the full URL of the Media Endpoint in the Micropub <a href="#configuration">configuration request</a>. Clients <em class="rfc2119" title="MUST NOT">MUST NOT</em> assume the Media Endpoint is on the same domain as the Micropub endpoint.</p>

        <p></p><div class="example"><div class="example-title marker"><span>Example 21</span></div><pre class="">GET /micropub?q=config
Authorization: Bearer xxxxxxxxx

{
  "media-endpoint": "https://media.example.com/micropub"
}</pre></div><p></p>
  
        <p>The Media Endpoint <em class="rfc2119" title="MUST">MUST</em> accept the same access tokens that the Micropub endpoint accepts.</p>

        <section id="request" typeof="bibo:Chapter" resource="#request" property="bibo:hasPart">
          <h4 id="h-request" resource="#h-request"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.6.1 </span>Request</span></h4>

          <p>To upload a file to the Media Endpoint, the client sends a <code>multipart/form-data</code> request with one part named <code>file</code>. The Media Endpoint <em class="rfc2119" title="MAY">MAY</em> ignore the suggested filename that the client sends.</p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 22</span></div><pre class="">multipart/form-data; boundary=553d9cee2030456a81931fb708ece92c

--553d9cee2030456a81931fb708ece92c
Content-Disposition: form-data; name="file"; filename="sunset.jpg"
Content-Type: image/jpeg
Content-Transfer-Encoding: binary

... (binary data) ...
--553d9cee2030456a81931fb708ece92c--</pre></div><p></p>

        </section>

        <section id="response-2" typeof="bibo:Chapter" resource="#response-2" property="bibo:hasPart">
          <h4 id="h-response-2" resource="#h-response-2"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.6.2 </span>Response</span></h4>

          <p>The Media Endpoint processes the file upload, storing it in whatever backend it wishes, and generates a URL to the file. The URL <em class="rfc2119" title="SHOULD">SHOULD</em> be unguessable, such as using a UUID in the path. If the request is successful, the endpoint <em class="rfc2119" title="MUST">MUST</em> return the URL to the file that was created in the HTTP <code>Location</code> header, and respond with <code>HTTP 201 Created</code>. The response body is left undefined.</p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 23</span></div><pre class="">HTTP/1.1 201 Created
Location: https://media.example.com/file/ff176c461dd111e6b6ba3e1d05defe78.jpg</pre></div><p></p>

          <p>The Micropub client can then use this URL as the value of e.g. the "photo" property of a Micropub request.</p>

          <p>The Media Endpoint <em class="rfc2119" title="MAY">MAY</em> periodically delete files uploaded if they are not used in a Micropub request within a specific amount of time.</p>

        </section>

      </section>

      <section id="querying" typeof="bibo:Chapter" resource="#querying" property="bibo:hasPart">
        <h3 id="h-querying" resource="#h-querying"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.7 </span>Querying</span></h3>

        <div class="warning"><div class="warning-title marker"><span>Warning</span></div><p class="">This section does not currently have interoperable
          implementations on both the server and client side, and therefore may
          change significantly once more implementation experience is gathered.</p></div>

        <p>Micropub clients may need to query the Micropub endpoint to discover
          its capabilities, such as finding a list of syndication targets that
          it displays to the user, or retrieving the source of a post to display
          in the updating interface.</p>

        <p>To query, make a <code>GET</code> request to the Micropub endpoint and use the
          <code>q</code> parameter to specify what you are querying.</p>

        <p>Note: The Micropub endpoint may include a query string such as <code>?micropub=endpoint</code>,
          so in this case, Micropub clients <em class="rfc2119" title="MUST">MUST</em> append the <code>q</code> parameter
          instead of replacing the query string.</p>

        <section id="configuration" typeof="bibo:Chapter" resource="#configuration" property="bibo:hasPart">
          <h4 id="h-configuration" resource="#h-configuration"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.7.1 </span>Configuration</span></h4>

          <p>When a user initially logs in to a Micropub client, the client will want to query some initial information about the user's endpoint. The client <em class="rfc2119" title="SHOULD">SHOULD</em> make a query request <code>q=config</code> to obtain initial configuration information.</p>

          <p>The server <em class="rfc2119" title="SHOULD">SHOULD</em> include the following information in the configuration response.</p>

          <p></p><ul>
            <li>The list of syndication endpoints supported (see <a href="#syndication-targets">Syndication Targets</a> for details)</li>
            <li>The Media Endpoint if supported</li>
          </ul><p></p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 24</span></div><pre class="">GET /micropub?q=config
Authorization: Bearer xxxxxxxxx

{
  "media-endpoint": "https://media.example.com/micropub",
  "syndicate-to": [
    {
      "uid": "https://myfavoritesocialnetwork.example/aaronpk",
      "name": "aaronpk on myfavoritesocialnetwork"
      "service": {
        "name": "My Favorite Social Network",
        "url": "https://myfavoritesocialnetwork.example/",
        "photo": "https://myfavoritesocialnetwork.example/img/icon.png"
      },
      "user": {
        "name": "aaronpk",
        "url": "https://myfavoritesocialnetwork.example/aaronpk",
        "photo": "https://myfavoritesocialnetwork.example/aaronpk/photo.jpg"
      }
    }
  ]
}</pre></div><p></p>
        </section>

        <section id="source-content" typeof="bibo:Chapter" resource="#source-content" property="bibo:hasPart">
          <h4 id="h-source-content" resource="#h-source-content"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.7.2 </span>Source Content</span></h4>

          <p>A Micropub client can query the endpoint to return specific properties of a post. This allows a client to request only the properties it needs or knows about, supporting such uses as making an interface to add tags to a post.</p>

          <p>To query, make a <code>GET</code> request to the Micropub endpoint and set the <code>q</code> parameter to <code>source</code>, and include the URL of the post in the <code>url</code> parameter. The query can specify the list of properties being requested by setting one or more values for the <code>properties</code> key. If more than one is specified, use array bracket notation for each name, according to [<cite><a class="bibref" href="#bib-HTML5">HTML5</a></cite>] URL encoding.</p>

          <p>The endpoint <em class="rfc2119" title="MUST">MUST</em> return the response in [<cite><a class="bibref" href="#bib-Microformats2">Microformats2</a></cite>] [<cite><a class="bibref" href="#bib-JSON">JSON</a></cite>] format, with an object named <code>properties</code>, where the keys are the names of the properties requested. If no properties are specified, then the response <em class="rfc2119" title="MUST">MUST</em> include all properties, as well as a <code>type</code> property indicating the vocabulary of the post.</p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 25</span></div><pre class="">GET /micropub?q=source&amp;properties[]=published&amp;properties[]=category&amp;url=http://aaronpk.example/post/1000
Authorization: Bearer xxxxxxxxx

{
  "properties": {
    "published": ["2016-02-21T12:50:53-08:00"],
    "category": [
      "foo", 
      "bar"
    ]
  }
}</pre></div><p></p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 26</span></div><pre class="">GET /micropub?q=source&amp;url=http://aaronpk.example/post/1000
Authorization: Bearer xxxxxxxxx

{
  "type": "h-entry",
  "properties": {
    "published": ["2016-02-21T12:50:53-08:00"],
    "content": ["Hello World"],
    "category": [
      "foo", 
      "bar"
    ]
  }
}</pre></div><p></p>

          <h4 id="html-content">HTML Content</h4>

          <p>If the source of the post was written as HTML content, then the endpoint <em class="rfc2119" title="MUST">MUST</em> return the <code>content</code> property as an object containing an <code>html</code> property. Otherwise, the endpoint <em class="rfc2119" title="MUST">MUST</em> return a string value for the <code>content</code> property, and the client will treat the value as plain text. This matches the behavior of the values of properties in [<cite><a class="bibref" href="#bib-Microformats2">Microformats2</a></cite>].</p>

          <p>Below is an example of requesting the content of a post which was authored as HTML.</p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 27</span></div><pre class="">GET /micropub?q=source&amp;properties=content&amp;url=http://aaronpk.example/post/1000
Authorization: Bearer xxxxxxxxx

{
  "properties": {
    "content": [
      {
        "html": "&lt;b&gt;Hello&lt;/b&gt; &lt;i&gt;World&lt;/i&gt;"
      }
    ]
  }
}</pre></div><p></p>

        </section> <!-- Source Content -->

        <section id="syndication-targets" typeof="bibo:Chapter" resource="#syndication-targets" property="bibo:hasPart">
          <h4 id="h-syndication-targets" resource="#h-syndication-targets"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.7.3 </span>Syndication Targets</span></h4>

          <p>To return a list of supported syndication targets, set the <code>q</code> parameter to <code>syndicate-to</code>.</p>

          <p></p><pre>GET /micropub?q=syndicate-to</pre><p></p>

          <p>The endpoint <em class="rfc2119" title="MUST">MUST</em> return the response in [<cite><a class="bibref" href="#bib-JSON">JSON</a></cite>] format, with a key of <code>syndicate-to</code> and the values being objects descriptive of the supported syndication targets.</p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 28</span></div><pre class="">GET /micropub?q=syndicate-to
Authorization: Bearer xxxxxxxxx
Accept: application/json

HTTP/1.1 200 OK
Content-type: application/json

{
  "syndicate-to": [
    {
      "uid": "https://archive.org/",
      "name": "archive.org"
    },
    {
      "uid": "https://wikimedia.org/",
      "name": "WikiMedia"
    },
    {
      "uid": "https://myfavoritesocialnetwork.example/aaronpk",
      "name": "aaronpk on myfavoritesocialnetwork"
      "service": {
        "name": "My Favorite Social Network",
        "url": "https://myfavoritesocialnetwork.example/",
        "photo": "https://myfavoritesocialnetwork.example/img/icon.png"
      },
      "user": {
        "name": "aaronpk",
        "url": "https://myfavoritesocialnetwork.example/aaronpk",
        "photo": "https://myfavoritesocialnetwork.example/aaronpk/photo.jpg"
      }
    }
  ]
}</pre></div><p></p>
        </section>

        <p>At a minimum, a syndication destination <em class="rfc2119" title="MUST">MUST</em> have <code>uid</code> and <code>name</code> properties. The <code>uid</code> property is opaque to the client, and is the value the client sends in the Micropub request to indicate the targets to syndicate to. The <code>name</code> property is the value the client can display to the user. The name should be unambiguously descriptive of the destination, so that if for example there are two destinations on the same service, the name can disambiguate them.</p>

        <p>The Micropub server <em class="rfc2119" title="MAY">MAY</em> also include additional information about the destination service and user account. This is accomplished with the additional properties <code>service</code> and <code>user</code>, both of which can have three properties, <code>name</code> (a human-readable name), <code>url</code> and <code>photo</code> (both URLs).</p>

        <p>The client may use the service and user properties to enhance the display of the syndication options, for example by including the user or service photos on the syndication buttons.</p>

      </section> <!-- Querying -->

      <section id="error-response" typeof="bibo:Chapter" resource="#error-response" property="bibo:hasPart">
        <h3 id="h-error-response" resource="#h-error-response"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.8 </span>Error Response</span></h3>

        <p>If there was an error with the request, the endpoint <em class="rfc2119" title="MUST">MUST</em> return an appropriate HTTP status code, typically 400, 401, or 403, and <em class="rfc2119" title="MAY">MAY</em> include a description of the error. If an error body is returned, the response body <em class="rfc2119" title="MUST">MUST</em> be encoded as a [<cite><a class="bibref" href="#bib-JSON">JSON</a></cite>] object and include at least a single property named <code>error</code> with the value set to one of the below:</p>

        <p></p><ul>
          <li>HTTP 403: <code>forbidden</code> - The authenticated user does not have permission to perform this request</li>
          <li>HTTP 401: <code>insufficient_scope</code> - The scope of this token does not meet the requirements for this request. The client may wish to re-authorize the user to obtain the necessary scope. The response <em class="rfc2119" title="MAY">MAY</em> include the "scope" attribute with the scope necessary to successfully perform this request.</li>
          <li>HTTP 400: <code>invalid_request</code> - The request is missing a required parameter, or there was a problem with a value of one of the parameters</li>
          <li>HTTP 400: <code>not_found</code> - The post with the requested URL was not found</li>
        </ul><p></p>

        <p>The response body <em class="rfc2119" title="MAY">MAY</em> also contain an <code>error_description</code> property with a human-readable description of the error message, used to assist the client developer in understanding the error. This is not meant to be shown to the end user.</p>

        <p>See the OAuth 2 Bearer Token [<cite><a class="bibref" href="#bib-RFC6750">RFC6750</a></cite>] spec for more details on the how to return error responses.</p>

        <p></p><div class="example"><div class="example-title marker"><span>Example 29</span></div><pre class="">GET /micropub?q=source&amp;url=http://aaronpk.example/post/404
Authorization: Bearer xxxxxxxx

HTTP/1.1 400 Bad Request
Content-type: application/json

{
  "error": "not_found",
  "error_description": "The post with the requested URL was not found"
}</pre></div><p></p>

      </section> <!-- Error Response -->

    </section> <!-- Syntax -->

    <section id="vocabulary" typeof="bibo:Chapter" resource="#vocabulary" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-vocabulary" resource="#h-vocabulary"><span property="xhv:role" resource="xhv:heading"><span class="secno">4. </span>Vocabulary</span></h2>

      <p>The vocabularies used in Micropub requests <em class="rfc2119" title="SHOULD">SHOULD</em> be the vocabularies defined by [<cite><a class="bibref" href="#bib-Microformats2">Microformats2</a></cite>] version 2. If the Microformats2 vocabulary is used, clients and servers <em class="rfc2119" title="MUST">MUST</em> support at least the [<cite><a class="bibref" href="#bib-h-entry">h-entry</a></cite>] vocabulary. Other vocabularies with widespread usage include [<cite><a class="bibref" href="#bib-h-event">h-event</a></cite>] and [<cite><a class="bibref" href="#bib-h-card">h-card</a></cite>]. When creating objects, the vocabulary of the object is indicated in the parameter <code>h</code>, or <code>type</code> in the JSON syntax. If no type is provided, the server <em class="rfc2119" title="SHOULD">SHOULD</em> assume a default value of <code>entry</code>.</p>

      <section class="informative" id="examples-of-creating-objects" typeof="bibo:Chapter" resource="#examples-of-creating-objects" property="bibo:hasPart">
        <h3 id="h-examples-of-creating-objects" resource="#h-examples-of-creating-objects"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1 </span>Examples of Creating Objects</span></h3><p><em>This section is non-normative.</em></p>

        <p>To indicate the object being created, use a property called <code>h</code>,
          (which would never be the name of a property of a Microformats object),
          followed by the name of the Microformats object. Examples:
          </p><ul>
            <li><code>h=entry</code></li>
            <li><code>h=card</code></li>
            <li><code>h=event</code></li>
            <li><code>h=cite</code></li>
          </ul>
        <p></p>

        <p>The following properties may be included in a request to create a new [<cite><a class="bibref" href="#bib-h-entry">h-entry</a></cite>]:
          </p><ul>
            <li>name</li>
            <li>summary</li>
            <li>content</li>
            <li>published</li>
            <li>updated</li>
            <li>category</li>
            <li>location
              <ul>
                <li>As a Geo URI [<cite><a class="bibref" href="#bib-RFC5870">RFC5870</a></cite>], for example: <code>geo:45.51533714,-122.646538633</code></li>
                <li>As a URL that contains an [<cite><a class="bibref" href="#bib-h-card">h-card</a></cite>]</li>
                <li>As a nested [<cite><a class="bibref" href="#bib-h-adr">h-adr</a></cite>] object</li>
              </ul>
            </li>
            <li>in-reply-to</li>
            <li>like-of</li>
            <li>repost-of</li>
            <li>syndication - Pass one or more URLs pointing to places where this entry already exists. Can be used for importing existing content to a site.</li>
            <li>like-of</li>
            <li>mp-syndicate-to = https://myfavoritesocialnetwork.example/aaronpk, https://archive.org/, etc.
              <ul>
                <li>This property is giving a command to the Micropub endpoint, rather than just creating data, so it uses the mp- prefix.</li>
              </ul>
            </li>
          </ul>
        <p></p>

        <section id="new-note" typeof="bibo:Chapter" resource="#new-note" property="bibo:hasPart">
          <h4 id="h-new-note" resource="#h-new-note"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1.1 </span>New Note</span></h4>

          <p>Posting a new note with tags, syndicating to myfavoritesocialnetwork:</p>
          <p></p><ul>
            <li>content</li>
            <li>category</li>
            <li>published (optional, defaults to "now" if not present. Useful for writing offline and syncing later.)</li>
            <li>mp-syndicate-to</li>
          </ul><p></p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 30</span></div><pre class="">POST /micropub HTTP/1.1
Host: aaronpk.example
Authorization: Bearer XXXXXXXXXXX
Content-type: application/x-www-form-urlencoded

h=entry
&amp;content=My+favorite+of+the+%23quantifiedself+trackers%2C+finally+released+their+official+API
&amp;category[]=quantifiedself&amp;category[]=api
&amp;mp-syndicate-to=https://myfavoritesocialnetwork.example/aaronpk</pre></div><p></p>

          <h4 id="minimal-example">Minimal Example</h4>

          <p></p><div class="example"><div class="example-title marker"><span>Example 31</span></div><pre class="">POST /micropub HTTP/1.1
Host: example.com
Content-type: application/x-www-form-urlencoded
Authorization: Bearer XXXXXXX

h=entry
&amp;content=Hello+World</pre></div><p></p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 32</span></div><pre class="">curl https://example.com/micropub -d h=entry -d "content=Hello World" -H "Authorization: Bearer XXXXXXX"</pre></div><p></p>

        </section>
        <section id="new-reply" typeof="bibo:Chapter" resource="#new-reply" property="bibo:hasPart">
          <h4 id="h-new-reply" resource="#h-new-reply"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1.2 </span>New Reply</span></h4>

          <p>Posting a new note with tags, syndicating to myfavoritesocialnetwork:</p>
          <p></p><ul>
            <li>content</li>
            <li>in-reply-to</li>
            <li>published</li>
            <li>mp-syndicate-to</li>
          </ul><p></p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 33</span></div><pre class="">POST /micropub HTTP/1.1
Host: aaronpk.example
Authorization: Bearer XXXXXXXXXXX
Content-type: application/x-www-form-urlencoded

h=entry
&amp;content=%40BarnabyWalters+My+favorite+for+that+use+case+is+Redis.
&amp;in-reply-to=http://waterpigs.example/notes/4S0LMw/
&amp;mp-syndicate-to=https://myfavoritesocialnetwork.example/aaronpk</pre></div><p></p>

        </section>
        <section id="new-repost" typeof="bibo:Chapter" resource="#new-repost" property="bibo:hasPart">
          <h4 id="h-new-repost" resource="#h-new-repost"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1.3 </span>New Repost</span></h4>

          <p>Posting a new repost, and adding additional tags.</p>
          <p></p><ul>
            <li>repost-of</li>
            <li>category</li>
          </ul><p></p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 34</span></div><pre class="">POST /micropub HTTP/1.1
Host: aaronpk.example
Authorization: Bearer XXXXXXXXXXX
Content-type: application/x-www-form-urlencoded

h=entry
&amp;repost-of=http://waterpigs.example/notes/4S0LMw/
&amp;category=realtime</pre></div><p></p>

        </section>
        <section id="new-article" typeof="bibo:Chapter" resource="#new-article" property="bibo:hasPart">
          <h4 id="h-new-article" resource="#h-new-article"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1.4 </span>New Article</span></h4>

          <p>Posting a new article with HTML content. Note that in this case, the <code>content</code> property is actually sent as an object containing the key <code>html</code>. This corresponds with the Microformats 2 syntax for indicating the parsed value contains HTML.</p>
          <p></p><ul>
            <li>name</li>
            <li>content[html]</li>
            <li>category</li>
            <li>published</li>
          </ul><p></p>

          <p></p><div class="example"><div class="example-title marker"><span>Example 35</span></div><pre class="">POST /micropub HTTP/1.1
Host: aaronparecki.com
Content-type: application/x-www-form-urlencoded

h=entry
&amp;name=Itching%3A+h-event+to+iCal+converter
&amp;content[html]=Now+that+I%27ve+been+%3Ca+href%3D%22http%3A%2F%2Faaronparecki.com%22%3Ecreating+a+list+of+events%3C%2Fa%3E
+on+my+site+it+would+be+great+if+I+could+get+a+more+calendar-like+view+of+that+list...
&amp;category[]=indieweb&amp;category[]=hevent&amp;category[]=events
&amp;category[]=calendar&amp;category[]=p3k</pre></div><p></p>

        </section>
        <section id="adding-files" typeof="bibo:Chapter" resource="#adding-files" property="bibo:hasPart">
          <h4 id="h-adding-files" resource="#h-adding-files"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1.5 </span>Adding Files</span></h4>

          <p>When a Micropub request includes a file, the entire request is
            sent in <a href="https://www.w3.org/TR/html5/forms.html#multipart-form-data">multipart form-data</a>
            encoding, and the file is named according to the property it corresponds with in the vocabulary, either <code>audio</code>, <code>video</code> or <code>photo</code>. A request <em class="rfc2119" title="MAY">MAY</em> include one or more of these files.</p>

          <p>For example, a service may post a video in the <code>video</code> property as well as a single frame preview of the video in the <code>photo</code> property.</p>

          <p>In PHP, these files are accessible using the $_FILES array:
            </p><pre>$_FILES['video']
$_FILES['photo']
$_FILES['audio']</pre><p></p>

          <p>Note that there is no practical way to upload a file when the request body is JSON encoded.</p>

          <p>The Micropub endpoint may store the file directly, or make an external
            request to upload it to a different backend storage, such as Amazon S3.</p>

        </section> <!-- Adding Files -->

      </section> <!-- Creating Objects -->

    </section> <!-- Vocabulary -->

    <section id="authentication-and-authorization" typeof="bibo:Chapter" resource="#authentication-and-authorization" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-authentication-and-authorization" resource="#h-authentication-and-authorization"><span property="xhv:role" resource="xhv:heading"><span class="secno">5. </span>Authentication and Authorization</span></h2>

      <section id="authentication" typeof="bibo:Chapter" resource="#authentication" property="bibo:hasPart">
        <h3 id="h-authentication" resource="#h-authentication"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.1 </span>Authentication</span></h3>

        <p>Micropub requests <em class="rfc2119" title="MUST">MUST</em> be authenticated by including a Bearer Token in
          either the HTTP header or a form-encoded body parameter as described
          in the OAuth Bearer Token RFC. [<cite><a class="bibref" href="#bib-RFC6750">RFC6750</a></cite>] Micropub servers <em class="rfc2119" title="MUST">MUST</em> accept
          the token using both methods.</p>

        <p></p><h3 id="http-header">HTTP Header</h3>
          <pre>Authorization: Bearer XXXXXXXXX</pre><p></p>

        <p></p><h3 id="form-encoded-body-parameter">Form-Encoded Body Parameter</h3>
          <pre>access_token=XXXXXXXXX</pre><p></p>
      </section> <!-- Authentication -->

      <section id="authorization" typeof="bibo:Chapter" resource="#authorization" property="bibo:hasPart">
        <h3 id="h-authorization" resource="#h-authorization"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.2 </span>Authorization</span></h3>

        <p>An app that wants to post to a user's Micropub endpoint will need
          to obtain authorization from the user in order to get an access token.
          Authorization <em class="rfc2119" title="SHOULD">SHOULD</em> be handled via the OAuth 2.0 [<cite><a class="bibref" href="#bib-RFC6749">RFC6749</a></cite>] protocol,
          including the [<cite><a class="bibref" href="#bib-IndieAuth">IndieAuth</a></cite>] extension which supports endpoint discovery from a URL.
          See <a href="http://indiewebcamp.com/obtaining-an-access-token">Obtaining an Access Token</a>
          for more details.</p>
      </section> <!-- Authorization -->

      <section id="endpoint-discovery" typeof="bibo:Chapter" resource="#endpoint-discovery" property="bibo:hasPart">
        <h3 id="h-endpoint-discovery" resource="#h-endpoint-discovery"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.3 </span>Endpoint Discovery</span></h3>

        <p>A Micropub client <em class="rfc2119" title="SHOULD">SHOULD</em> be able to be configured by authenticating
          with a domain name using [<cite><a class="bibref" href="#bib-IndieAuth">IndieAuth</a></cite>]. During this authentication (and authorization),
          the client discovers the Micropub endpoint which will be used to create posts.</p>

        <p>Add a &lt;link&gt; tag in the HTML head of your home page, or send an <code>HTTP Link</code> header.</p>

        <p></p><h3 id="http-link-header">HTTP Link Header</h3>
          <pre>Link: &lt;https://example.com/micropub&gt;; rel="micropub"</pre><p></p>

        <p></p><h3 id="html-link-tag">HTML Link Tag</h3>
          <pre>&lt;link rel="micropub" href="https://example.com/micropub"&gt;</pre><p></p>

      </section> <!-- Discovery -->

      <section id="scope" typeof="bibo:Chapter" resource="#scope" property="bibo:hasPart">
        <h3 id="h-scope" resource="#h-scope"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.4 </span>Scope</span></h3>

        <p>The Micropub server <em class="rfc2119" title="MUST">MUST</em> require the bearer token to include at least one scope
          value, in order to ensure posts cannot be created by arbitrary tokens.</p>
        <p>The client may request one or more scopes during the authorization
          request. It does this according to standard OAuth 2.0 techniques,
          by passing a space-separated list of scope names in the authorization request. [<cite><a class="bibref" href="#bib-RFC6749">RFC6749</a></cite>]</p>
        <p>The authorization server <em class="rfc2119" title="MUST">MUST</em> indicate to the user any scopes that
          are part of the request, whether or not the authorization server
          recognizes the scopes. The authorization server <em class="rfc2119" title="MAY">MAY</em> also allow the
          user to add or remove scopes that the client requests.</p>
        <p>Most Micropub servers require clients to obtain the
          "create" scope in order to create posts. However, some servers <em class="rfc2119" title="MAY">MAY</em>
          require more granular scope, such as "delete", "update", or "create:video",
          in order to limit the abilities of various clients.
          See <a href="http://indiewebcamp.com/scope">Scope</a> for more details and 
          a list of all currently used values for scope.</p>
      </section> <!-- Scope -->

    </section> <!-- Authentication and Authorization -->

    <!--
    <section>
      <h2>Security Considerations</h2>

      <section>
        <h3>...</h3>

      </section>
    </section>
    -->

    <!--
    <section class="appendix informative">
      <h2>Extensions</h2>

      <p>The following Micropub Extension Specifications have 2+ interoperable implementations live on the web and are thus listed here:</p>

      <section>
        <h3><a href="http://indiewebcamp.com/...">...</a></h3>
        <p>The [[...]] protocol is an ... extension to Micropub.</p>
      </section>
    </section>
    -->

    <section class="appendix informative" id="resources" typeof="bibo:Chapter" resource="#resources" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-resources" resource="#h-resources"><span property="xhv:role" resource="xhv:heading"><span class="secno">A. </span>Resources</span></h2><p><em>This section is non-normative.</em></p>

      <p>
        </p><ul>
          <li><a href="http://indiewebcamp.com/Micropub">FAQ</a></li>
          <li><a href="http://indiewebcamp.com/micropub-endpoint">Creating a Micropub Endpoint</a></li>
          <li><a href="http://indiewebcamp.com/obtaining-an-access-token">Obtaining an Access Token</a></li>
          <li><a href="http://indiewebcamp.com/Micropub-brainstorming">Brainstorming</a></li>
        </ul>
      <p></p>
    </section>

    <!--
    <section class="appendix informative">
      <h2>Articles</h2>

      <p>You can find a list of <a href="http://indiewebcamp.com/micropub#Articles">articles about Micropub</a> on the IndieWebCamp wiki.</p>
    </section>
    -->

    <section class="appendix informative" id="implementations" typeof="bibo:Chapter" resource="#implementations" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-implementations" resource="#h-implementations"><span property="xhv:role" resource="xhv:heading"><span class="secno">B. </span>Implementations</span></h2><p><em>This section is non-normative.</em></p>

      <section id="libraries" typeof="bibo:Chapter" resource="#libraries" property="bibo:hasPart">
        <h3 id="h-libraries" resource="#h-libraries"><span property="xhv:role" resource="xhv:heading"><span class="secno">B.1 </span>Libraries</span></h3>

        <ul>
          <li><a href="https://github.com/snarfed/wordpress-micropub">wordpress-micropub</a> - WordPress plugin for a Micropub server endpoint</li>
          <li><a href="https://github.com/kylewm/flask-micropub">flask-micropub</a> - Flask (Python) plugin that makes it easy to add IndieAuth authentication and Micropub authorization to a client application.</li>
          <li><a href="https://github.com/voxpelli/node-micropub-express">micropub-express</a> - Node.js library for a Micropub server endpoint</li>
        </ul>
      </section>

      <section id="servers" typeof="bibo:Chapter" resource="#servers" property="bibo:hasPart">
        <h3 id="h-servers" resource="#h-servers"><span property="xhv:role" resource="xhv:heading"><span class="secno">B.2 </span>Servers</span></h3>

        <ul>
          <li><a href="https://github.com/ShaneHudson/Micropub_Craft">Craft CMS</a> - a Craft plugin that supports Micropub.</li>
          <li><a href="https://github.com/sanduhrs/micropub">Drupal</a> - a Drupal module to add a Micropub endpoint.</li>
          <li><a href="https://withknown.com">Known</a> - Known supports creating posts via Micropub.</li>
          <li><a href="https://wordpress.org/plugins/micropub/">Wordpress</a> - a Wordpress plugin which adds a Micropub endpoint.</li>
        </ul>
      </section>

      <section id="clients" typeof="bibo:Chapter" resource="#clients" property="bibo:hasPart">
        <h3 id="h-clients" resource="#h-clients"><span property="xhv:role" resource="xhv:heading"><span class="secno">B.3 </span>Clients</span></h3>

        <ul>
          <li><a href="https://github.com/kylewm/micropub-xmpp-bot/">micropub-xmpp-bot</a> an experimental XMPP chat bot for posting notes, replies, likes, and reposts via Micropub.</li>
          <li><a href="https://github.com/snarfed/ownyourresponses">ownyourresponses</a> polls your Twitter and Instagram accounts periodically for new activity via the APIs and creates corresponding like, repost, and reply posts on your site via Micropub.</li>
        </ul>
      </section>

      <section id="services" typeof="bibo:Chapter" resource="#services" property="bibo:hasPart">
        <h3 id="h-services" resource="#h-services"><span property="xhv:role" resource="xhv:heading"><span class="secno">B.4 </span>Services</span></h3>

        <p>Note: Many of the services below are also open source Micropub clients.</p>

        <ul>
          <li><a href="https://micropublish.herokuapp.com/">Micropublish</a> is a simple Micropub client which supports notes, articles, bookmarks, replies, and reposts.</li>
          <li><a href="https://woodwind.xyz">Woodwind</a> is a reader which supports posting replies and likes via Micropub.</li>
          <li><a href="https://monocle.p3k.io">Monocle</a> is a reader which supports posting likes via Micropub.</li>
          <li><a href="https://quill.p3k.io">Quill</a> is a simple Micropub client which supports notes, articles, bookmarks, likes and photos.</li>
          <li><a href="https://silo.pub/">silo.pub</a> is a service that lets you use Micropub clients to post to hosted blogs on Wordpress.com, Tumblr, and others.</li>
          <li><a href="https://waterpigs.co.uk/notes/new/">Taproot</a> supports posting notes.</li>
          <li><a href="https://teacup.p3k.io">Teacup</a> is a client for posting various types of food posts.</li>
          <li><a href="https://ownyourgram.com">OwnYourGram</a> polls your Instagram account and posts your photos to your website via Micropub.</li>
        </ul>
      </section>

    </section>

    <section class="appendix" id="acknowledgements" typeof="bibo:Chapter" resource="#acknowledgements" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-acknowledgements" resource="#h-acknowledgements"><span property="xhv:role" resource="xhv:heading"><span class="secno">C. </span>Acknowledgements</span></h2>

      <p>The editor wishes to thank the <a href="http://indiewebcamp.com/">IndieWebCamp</a>
        community and other implementers for their support, encouragement and enthusiasm.</p>
    </section>

    <section class="appendix informative" id="change-log" typeof="bibo:Chapter" resource="#change-log" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-change-log" resource="#h-change-log"><span property="xhv:role" resource="xhv:heading"><span class="secno">D. </span>Change Log</span></h2><p><em>This section is non-normative.</em></p>

      <section id="changes-from-04-may-2016-wd-to-this-version" typeof="bibo:Chapter" resource="#changes-from-04-may-2016-wd-to-this-version" property="bibo:hasPart">
        <h3 id="h-changes-from-04-may-2016-wd-to-this-version" resource="#h-changes-from-04-may-2016-wd-to-this-version"><span property="xhv:role" resource="xhv:heading"><span class="secno">D.1 </span>Changes from 04 May 2016 WD to this version</span></h3>

        <ul>
          <li>Removed warning about lack of interoperable implementations of updates based on new implementations</li>
          <li>Updated list of implementations</li>
          <li>Added explicit note about not storing the <code>access_token</code> value</li>
          <li>Added details on using a Media Endpoint for handling file uploads separately</li>
        </ul>
      </section>

      <section id="changes-from-01-march-2016-wd-to-04-may-2016-version" typeof="bibo:Chapter" resource="#changes-from-01-march-2016-wd-to-04-may-2016-version" property="bibo:hasPart">
        <h3 id="h-changes-from-01-march-2016-wd-to-04-may-2016-version" resource="#h-changes-from-01-march-2016-wd-to-04-may-2016-version"><span property="xhv:role" resource="xhv:heading"><span class="secno">D.2 </span>Changes from 01 March 2016 WD to 04 May 2016 version</span></h3>

        <p>This section lists changes from the <a href="https://www.w3.org/TR/2016/WD-micropub-20160301/">01 March 2016 FPWD</a> to this Working Draft</p>

        <ul>
          <li>Removed extra nesting of <code>properties</code> key in updates</li>
          <li>Non-normative typo fixes</li>
          <li>Added HTTP 201 with Location header as a response for updates</li>
          <li>Updated <code>syndicate-to</code> response to include more details of the destination</li>
        </ul>
      </section>

      <section id="changes-from-28-january-2016-fpwd-to-01-march-2016-version" typeof="bibo:Chapter" resource="#changes-from-28-january-2016-fpwd-to-01-march-2016-version" property="bibo:hasPart">
        <h3 id="h-changes-from-28-january-2016-fpwd-to-01-march-2016-version" resource="#h-changes-from-28-january-2016-fpwd-to-01-march-2016-version"><span property="xhv:role" resource="xhv:heading"><span class="secno">D.3 </span>Changes from 28 January 2016 FPWD to 01 March 2016 version</span></h3>

        <p>This section lists changes from the <a href="https://www.w3.org/TR/2016/WD-micropub-20160128/">28 January 2016 FPWD</a> to this Working Draft</p>

        <ul>
          <li>Corrected references to be normative where appropriate</li>
          <li>Added new Conformance section summarizing conformance requirements for Micropub Clients and Servers</li>
          <li>Clarified that a server should create the post with any properties recognized when it receives a request with unrecognized properties</li>
          <li>Added a section on querying the Micropub endpoint for the source of specific properties, to better support editing</li>
          <li>Added new "Vocabulary" section which normatively references Microformats 2 vocabularies</li>
          <li>Micropub servers <em class="rfc2119" title="MAY">MAY</em> include a JSON object describing the changes that were applied for Updates</li>
          <li>Added a section listing specific error responses, also referencing the OAuth 2 Bearer Token spec for other error responses</li>
          <li>If there is a response body, it <em class="rfc2119" title="SHOULD">SHOULD</em> be JSON</li>
          <li>Default to create an h-entry if no type is specified</li>
          <li>Clarified posting files and sending HTML content</li>
          <li>Reorganized "How To" section into an "Authentication and Authorization" section</li>
          <li>Fixed some examples of HTTP requests that were missing the response headers</li>
          <li>Updated references from Microformats to Microformats 2</li>
        </ul>
      </section>
    </section>

  

<section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" property="bibo:hasPart"><!--OddPage--><h2 id="h-references" resource="#h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">E. </span>References</span></h2><section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" property="bibo:hasPart"><h3 id="h-normative-references" resource="#h-normative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">E.1 </span>Normative references</span></h3><dl class="bibliography" resource=""><dt id="bib-HTML5">[HTML5]</dt><dd>Ian Hickson; Robin Berjon; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Edward O'Connor; Silvia Pfeiffer. W3C. <a href="http://www.w3.org/TR/html5/" property="dc:requires"><cite>HTML5</cite></a>. 28 October 2014. W3C Recommendation. URL: <a href="http://www.w3.org/TR/html5/" property="dc:requires">http://www.w3.org/TR/html5/</a>
</dd><dt id="bib-JSON">[JSON]</dt><dd>D. Crockford. IETF. <a href="https://tools.ietf.org/html/rfc4627" property="dc:requires"><cite>The application/json Media Type for JavaScript Object Notation (JSON)</cite></a>. July 2006. Informational. URL: <a href="https://tools.ietf.org/html/rfc4627" property="dc:requires">https://tools.ietf.org/html/rfc4627</a>
</dd><dt id="bib-Microformats2">[Microformats2]</dt><dd>Tantek Çelik. microformats.org. <a href="http://microformats.org/wiki/microformats2" property="dc:requires"><cite>Microformats 2</cite></a>. Living Specification. URL: <a href="http://microformats.org/wiki/microformats2" property="dc:requires">http://microformats.org/wiki/microformats2</a>
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd>S. Bradner. IETF. <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires">https://tools.ietf.org/html/rfc2119</a>
</dd><dt id="bib-RFC2616">[RFC2616]</dt><dd>R. Fielding; J. Gettys; J. Mogul; H. Frystyk; L. Masinter; P. Leach; T. Berners-Lee. IETF. <a href="https://tools.ietf.org/html/rfc2616" property="dc:requires"><cite>Hypertext Transfer Protocol -- HTTP/1.1</cite></a>. June 1999. Draft Standard. URL: <a href="https://tools.ietf.org/html/rfc2616" property="dc:requires">https://tools.ietf.org/html/rfc2616</a>
</dd><dt id="bib-RFC6749">[RFC6749]</dt><dd>D. Hardt, Ed.. IETF. <a href="https://tools.ietf.org/html/rfc6749" property="dc:requires"><cite>The OAuth 2.0 Authorization Framework</cite></a>. October 2012. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6749" property="dc:requires">https://tools.ietf.org/html/rfc6749</a>
</dd><dt id="bib-RFC6750">[RFC6750]</dt><dd>M. Jones; D. Hardt. IETF. <a href="https://tools.ietf.org/html/rfc6750" property="dc:requires"><cite>The OAuth 2.0 Authorization Framework: Bearer Token Usage</cite></a>. October 2012. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6750" property="dc:requires">https://tools.ietf.org/html/rfc6750</a>
</dd><dt id="bib-h-entry">[h-entry]</dt><dd>Tantek Çelik. microformats.org. <a href="http://microformats.org/wiki/h-entry" property="dc:requires"><cite>h-entry</cite></a>. Living Specification. URL: <a href="http://microformats.org/wiki/h-entry" property="dc:requires">http://microformats.org/wiki/h-entry</a>
</dd></dl></section><section id="informative-references" typeof="bibo:Chapter" resource="#informative-references" property="bibo:hasPart"><h3 id="h-informative-references" resource="#h-informative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">E.2 </span>Informative references</span></h3><dl class="bibliography" resource=""><dt id="bib-IndieAuth">[IndieAuth]</dt><dd>Aaron Parecki. indiewebcamp.com. <a href="http://indiewebcamp.com/IndieAuth-spec" property="dc:references"><cite>IndieAuth</cite></a>. Living Specification. URL: <a href="http://indiewebcamp.com/IndieAuth-spec" property="dc:references">http://indiewebcamp.com/IndieAuth-spec</a>
</dd><dt id="bib-RFC5870">[RFC5870]</dt><dd>A. Mayrhofer; C. Spanring. IETF. <a href="https://tools.ietf.org/html/rfc5870" property="dc:references"><cite>A Uniform Resource Identifier for Geographic Locations ('geo' URI)</cite></a>. June 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5870" property="dc:references">https://tools.ietf.org/html/rfc5870</a>
</dd><dt id="bib-h-adr">[h-adr]</dt><dd>Tantek Çelik. microformats.org. <a href="http://microformats.org/wiki/h-adr" property="dc:references"><cite>h-adr</cite></a>. Living Specification. URL: <a href="http://microformats.org/wiki/h-adr" property="dc:references">http://microformats.org/wiki/h-adr</a>
</dd><dt id="bib-h-card">[h-card]</dt><dd>Tantek Çelik. microformats.org. <a href="http://microformats.org/wiki/h-card" property="dc:references"><cite>h-card</cite></a>. Living Specification. URL: <a href="http://microformats.org/wiki/h-card" property="dc:references">http://microformats.org/wiki/h-card</a>
</dd><dt id="bib-h-event">[h-event]</dt><dd>Tantek Çelik. microformats.org. <a href="http://microformats.org/wiki/h-event" property="dc:references"><cite>h-event</cite></a>. Living Specification. URL: <a href="http://microformats.org/wiki/h-event" property="dc:references">http://microformats.org/wiki/h-event</a>
</dd></dl></section></section><p role="navigation" id="back-to-top"><a href="#toc"><abbr title="Back to Top">↑</abbr></a></p><script async="" defer="" src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>
